#!/bin/sh

echo "ğŸš€ Running pre-push checks..."

# Run tests
echo "ğŸ§ª Running tests..."
cargo test --all-features
if [ $? -ne 0 ]; then
    echo "âŒ Tests failed. Please fix them before pushing."
    exit 1
fi

# Check for security vulnerabilities (if cargo-audit is installed)
if command -v cargo-audit > /dev/null 2>&1; then
    echo "ğŸ”’ Running security audit..."
    cargo audit || echo "âš ï¸  Warning: Security vulnerabilities found. Consider fixing them."
else
    echo "â„¹ï¸  cargo-audit not installed, skipping security audit"
    echo "   Install with: cargo install cargo-audit"
fi

echo "âœ… Pre-push checks passed!"
