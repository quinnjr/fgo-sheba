#!/bin/sh

echo "ğŸ” Running pre-commit checks..."

# Check Rust formatting
echo "ğŸ“ Checking Rust formatting..."
cargo fmt --all -- --check
if [ $? -ne 0 ]; then
    echo "âŒ Rust formatting check failed. Run 'cargo fmt' to fix."
    exit 1
fi

# Run Clippy (warnings only, show summary)
echo "ğŸ“ Running Clippy..."
cargo clippy --all-targets --all-features 2>&1 | tail -5

# Quick compile check
echo "ğŸ”¨ Checking compilation..."
cargo check --all-targets
if [ $? -ne 0 ]; then
    echo "âŒ Compilation failed. Please fix errors before committing."
    exit 1
fi

echo "âœ… Pre-commit checks passed!"
